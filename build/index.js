var d=(o,t,e)=>new Promise((r,a)=>{var i=c=>{try{s(e.next(c))}catch(l){a(l)}},n=c=>{try{s(e.throw(c))}catch(l){a(l)}},s=c=>c.done?r(c.value):Promise.resolve(c.value).then(i,n);s((e=e.apply(o,t)).next())});function f(o){let t;o.indexOf("a=candidate:")===0?t=o.substring(12).split(" "):t=o.substring(10).split(" ");let e=null,r=null,a=null;for(let n=8;n<t.length;n+=2)switch(t[n]){case"raddr":e=t[n+1];break;case"rport":r=parseInt(t[n+1],10);break;case"tcptype":a=t[n+1];break;default:break}return{foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7],relatedAddress:e,relatedPort:r,tcpType:a}}var p=()=>new Promise((o,t)=>{let e={},r=new RTCPeerConnection({iceServers:[{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"}]});r.createDataChannel("foo"),r.onicecandidate=function(a){if(a.candidate&&a.candidate.candidate.indexOf("srflx")!==-1){let i=f(a.candidate.candidate),{relatedPort:n,port:s}=i;n!=null&&(e[n]||(e[n]=[]),s!=null&&e[n].push(s))}else if(!a.candidate&&Object.keys(e).length===1){let i=e[Object.keys(e)[0]];o(i.length===1)}},r.createOffer().then(a=>r.setLocalDescription(a))});(()=>d(void 0,null,function*(){let o=yield p(),t=document.querySelector(".nat");t instanceof HTMLElement&&(t.innerText=o?"Normal NAT":"Symmetric NAT")}))();
//# sourceMappingURL=index.js.map
